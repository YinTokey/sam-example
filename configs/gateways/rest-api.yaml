# Plugin Metadata:
# Name: sam-rest-gateway
# Version: 0.1.0
# Description: The Solace Agent Mesh (SAM) REST API Gateway provides a standard, robust, and secure HTTP-based entry point for programmatic and system-to-system integrations. It allows external clients to submit tasks to SAM agents, manage files, and discover agent capabilities using a familiar RESTful interface.
# Author: SolaceLabs <solacelabs@solace.com>

log:
  stdout_log_level: INFO
  log_file_level: DEBUG
  log_file: rest-api.log

# To use the `shared_config.yaml` file, uncomment the following line and remove the `shared_config` section below.
!include ../shared_config.yaml

apps:
  # --- App Definition ---
  - name: RestApi__app # Unique name for this gateway app instance
    app_module: sam_rest_gateway.app # Points to the plugin's App class
    broker:
      <<: *broker_connection

    app_config:
      namespace: ${NAMESPACE}
      gateway_id: rest-api-gw-01
      artifact_service: *default_artifact_service

      authorization_service:
        type: "none" # Or "default_rbac"

      # --- REST Gateway Specific Configuration ---
      rest_api_server_host: ${REST_API_HOST, 0.0.0.0}
      rest_api_server_port: ${REST_API_PORT, 8080}
      sync_mode_timeout_seconds: 300 # Timeout for the legacy v1 synchronous API

      # --- Authentication Configuration ---
      enforce_authentication: false # Set to false to disable auth checks
      external_auth_service_url: ${EXTERNAL_AUTH_SERVICE_URL, http://localhost:8080}

      # --- Development User Identity (used when enforce_authentication is false) ---
      default_user_identity: "sam_dev_user"

      system_purpose: >
            The system is an AI Chatbot with agentic capabilities.
            It will use the agents available to provide information,
            reasoning and general assistance for the users in this system.
            **Always return useful artifacts and files that you create to the user.**
            Provide a status update before each tool call.
            Your external name is Agent Mesh.

      response_format: >
            Responses should be clear, concise, and professionally toned.
            Format responses to the user in Markdown using appropriate formatting.
